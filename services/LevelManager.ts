import { Entity, EntityType, LevelData, Vector2 } from '../types';
import { TILE_SIZE } from '../constants';

const W = TILE_SIZE;

const parseLevel = (id: number, name: string, rows: string[], hint?: string, darkness: boolean = false, timeLimit?: number): LevelData => {
    const entities: Entity[] = [];
    let spawn: Vector2 = { x: 0, y: 0 };
    let width = 0;
    let height = rows.length * W; 
    
    // Store buttons temporarily to link them later
    const buttonsToLink: { btn: Entity, targetId: string }[] = [];

    rows.forEach((row, r) => {
        if (row.length * W > width) width = row.length * W;
        for (let c = 0; c < row.length; c++) {
            const char = row[c];
            const x = c * W;
            const y = r * W;
            const key = `${id}_${c}_${r}`;
            const base = { visible: true, active: true };

            switch (char) {
                case '#': entities.push({ ...base, id: `w${key}`, type: EntityType.WALL, x, y, w: W, h: W }); break;
                case '@': spawn = { x, y: y }; break;
                case 'D': entities.push({ ...base, id: `d${key}`, type: EntityType.DOOR, x, y, w: W, h: W * 1.5 }); break;
                
                // Basics
                case '^': entities.push({ ...base, id: `s${key}`, type: EntityType.SPIKE, x: x + 4, y: y + 12, w: W - 8, h: W - 12 }); break; 
                case 'V': entities.push({ ...base, id: `fs${key}`, type: EntityType.FALLING_SPIKE, x: x + 4, y: y, w: W - 8, h: W - 4, speed: 600 }); break;
                case 'T': entities.push({ ...base, id: `tb${key}`, type: EntityType.TROLL_BLOCK, x, y, w: W, h: W }); break;
                case 'M': entities.push({ ...base, id: `m${key}`, type: EntityType.ROAMER, x, y, w: W, h: W, speed: 100, range: W*3, initialX: x }); break;
                case 'C': entities.push({ ...base, id: `c${key}`, type: EntityType.CRUSHER, x, y, w: W*2, h: W*3, speed: 150, range: W*4, initialY: y }); break;
                case '=': entities.push({ ...base, id: `mp${key}`, type: EntityType.MOVING_PLATFORM, x, y, w: W*2, h: W/2, axis: 'x', range: W*3, speed: 2, initialX: x, initialY: y }); break;
                case 'K': entities.push({ ...base, id: `k${key}`, type: EntityType.KEY, x, y, w: W, h: W }); break;
                case 'X': entities.push({ ...base, id: `fd${key}`, type: EntityType.FAKE_DOOR, x, y, w: W, h: W * 1.5 }); break;
                case 'Z': entities.push({ ...base, id: `wf${key}`, type: EntityType.WIN_FAKE, x, y, w: W, h: W * 1.5, speed: 250 }); break;
                
                // Advanced Walls
                case 'I': entities.push({ ...base, id: `il${key}`, type: EntityType.ILLUSION_WALL, x, y, w: W, h: W }); break;
                case 'G': entities.push({ ...base, id: `gl${key}`, type: EntityType.GLASS_WALL, x, y, w: W, h: W }); break;
                case 'F': entities.push({ ...base, id: `fr${key}`, type: EntityType.FRAGILE_BLOCK, x, y, w: W, h: W }); break;
                case 'O': entities.push({ ...base, id: `tw${key}`, type: EntityType.TOGGLE_WALL, x, y, w: W, h: W, toggleTime: 1.5 }); break;
                case '*': entities.push({ ...base, id: `sp${key}`, type: EntityType.SPINNER, x, y, w: W*3, h: W/4, speed: 3 }); break;
                
                // Traps
                case '>': entities.push({ ...base, id: `shR${key}`, type: EntityType.SHOOTER, x, y, w: W, h: W, direction: 'right', speed: 2.0 }); break;
                case '<': entities.push({ ...base, id: `shL${key}`, type: EntityType.SHOOTER, x, y, w: W, h: W, direction: 'left', speed: 2.0 }); break;
                case 'A': entities.push({ ...base, id: `shU${key}`, type: EntityType.SHOOTER, x, y, w: W, h: W, direction: 'up', speed: 2.0 }); break;
                case 'v': entities.push({ ...base, id: `shD${key}`, type: EntityType.SHOOTER, x, y, w: W, h: W, direction: 'down', speed: 2.0 }); break;
                case 'H': entities.push({ ...base, id: `hm${key}`, type: EntityType.HOMING_LAUNCHER, x, y, w: W, h: W, speed: 3.0 }); break;
                case 'E': entities.push({ ...base, id: `el${key}`, type: EntityType.ELECTRIC_FIELD, x, y, w: W, h: W*3, toggleTime: 1.0 }); break;
                case '_': entities.push({ ...base, id: `cf${key}`, type: EntityType.CHARGED_FLOOR, x, y: y+W/2, w: W, h: W/2 }); break;
                case 'B': entities.push({ ...base, id: `fb${key}`, type: EntityType.FALLING_BLOCK, x, y, w: W*2, h: W*2, initialY: y }); break;
                case 'P': entities.push({ ...base, id: `pn${key}`, type: EntityType.PENDULUM, x: x+W/2, y, w: 20, h: W*3, speed: 3 }); break;
                case 'R': entities.push({ ...base, id: `rs${key}`, type: EntityType.ROTATING_SAW, x, y, w: W, h: W, speed: 5 }); break;
                
                // Mechanical
                case 'J': entities.push({ ...base, id: `sp${key}`, type: EntityType.SPRING, x, y: y+W/2, w: W, h: W/2 }); break;
                case '-': entities.push({ ...base, id: `ow${key}`, type: EntityType.ONE_WAY_PLATFORM, x, y, w: W, h: 10 }); break;
                case 'b': 
                    const btn = { ...base, id: `bt${key}`, type: EntityType.BUTTON, x, y, w: W, h: W };
                    entities.push(btn);
                    buttonsToLink.push({ btn, targetId: 'LINK_TARGET' });
                    break;
                case 'L': entities.push({ ...base, id: `td${key}`, type: EntityType.TIMED_DOOR, x, y, w: W, h: W * 2, visible: true }); break;
                case 'S': entities.push({ ...base, id: `txt${key}`, type: EntityType.TEXT, x, y, w: W, h: W, text: hint || '!' }); break;
                
                // Time
                case '|': entities.push({ ...base, id: `rs${key}`, type: EntityType.RHYTHM_SPIKE, x, y: y+W-W, w: W, h: W, toggleTime: 1.0, initialDelay: (x/W)*0.2 }); break;
                case 'W': entities.push({ ...base, id: `dw${key}`, type: EntityType.DOOM_WALL, x, y, w: W*2, h: height, speed: 80 }); break;

                // Smart Monsters
                case '1': entities.push({ ...base, id: `m1${key}`, type: EntityType.MONSTER_CHASER, x, y, w: W, h: W, detectRange: 250, speed: 60 }); break;
                case '2': entities.push({ ...base, id: `m2${key}`, type: EntityType.MONSTER_GUARD, x, y, w: W, h: W, range: W*3, initialX: x, speed: 120 }); break;
                case '3': entities.push({ ...base, id: `m3${key}`, type: EntityType.MONSTER_COLLECTOR, x, y, w: W, h: W, speed: 160 }); break;
                case '4': entities.push({ ...base, id: `m4${key}`, type: EntityType.MONSTER_BUILDER, x, y, w: W, h: W, toggleTime: 2.5 }); break;
            }
        }
    });

    // Auto-link buttons to the nearest mechanic
    const targets = entities.filter(e => e.type === EntityType.TIMED_DOOR || e.type === EntityType.TOGGLE_WALL || e.type === EntityType.FALLING_BLOCK);
    buttonsToLink.forEach((item, index) => {
        if (targets[index % targets.length]) {
            item.btn.linkId = targets[index % targets.length].id;
        }
    });

    return { id, name, width, height, spawn, entities, hint, darkness, timeLimit };
};

export const LEVELS = [
    // --- TUTORIAL (1-8) - Kept for onboarding ---
    parseLevel(1, "The Beginning", [
        "......................",
        "......................",
        "....................D.",
        "..................T###",
        "................T.....",
        ".@....................",
        "#######.......####.###",
        "######################"
    ], "Trust is earned."),
    parseLevel(2, "Rain Check", [
        "......................",
        "........V.V.V.V.V.....",
        "....................D.",
        "...................###",
        ".@....................",
        "###...............####",
        "######################"
    ], "Look up."),
    parseLevel(3, "Catch Me", [
        "......................",
        "......................",
        "..................T.D.",
        "###................###",
        "................T.....",
        ".@....................",
        "###...Z...........####",
        "######################"
    ], "Fake news."),
    parseLevel(4, "Meet Bob", [
        ".....V.V.V.V.V........",
        "....................D.",
        "...................TTT",
        "......................",
        ".................#....",
        ".@.........M..........",
        "######################",
        "######################"
    ], "Avoid Bob."),
    parseLevel(5, "Pancake", [
        "....V...V...V........",
        "....C...C...C.......D.",
        "...................###",
        "................#.....",
        ".@....................",
        "###................###",
        "######################"
    ], "Don't get flattened."),
    parseLevel(6, "Which One?", [
        "............................................",
        "................................V.V.V.V.....",
        "............................................",
        "..........................................D.",
        ".@..................X.#.................####",
        "###...............#####......M..............",
        "############################################"
    ], "Pick a door."),
    parseLevel(7, "Don't Stop", [
        "....................X.",
        "...................###",
        "......^...^...^.T.....",
        ".@..T.T.T.T.T.T.......",
        "###.................D.",
        "###................###"
    ], "Keep moving."),
    parseLevel(8, "Soft Walls", [
        "......................",
        "......................",
        "..............M.....X.",
        ".........#############",
        "..................I.D.",
        ".@...#################",
        "####..................",
        "......................"
    ], "Walls lie."),

    // --- PHASE 2: DECEPTION & TRUST (9-20) ---
    parseLevel(9, "Floor is Lava", [
        "......................",
        "......................",
        "......T.....^....^..@.", // Mix of Troll and Fragile
        "#II###...#############",
        "....#.................",
        "....#.................",
        ".D..#..........M.....X",
        "######################"
    ], "Or is it?"),

    parseLevel(10, "Spring Loaded", [
        "....................D.",
        "...................###",
        "................T.....",
        ".......#####IIII###...",
        ".@..J..^^^^^^^^^^^^...", // Springs shoot you into spikes if not careful
        "###.#..............###",
        "......................"
    ], "Control your bounce."),

    parseLevel(11, "Invisible Bridge", [
        "............V.......D.",
        "...................###",
        "..................T...", // Invisible walls
        ".................T....",
        ".@..T.I.T.I.T.T.i.....",
        "###^^^^^^^^^^^^^^^^###", // Pit of spikes with invisible bridge
        "######################"
    ], "Faith."),

    parseLevel(12, "Ghost House", [
        "....................D.",
        "...................###",
        "....1.......1.........", // Chasers
        "......................",
        ".@.......1............",
        "###..###...###.....###",
        "######################"
    ], "They pass through walls."),

    parseLevel(13, "Key Bait", [
        "....................D.",
        "...................###",
        "..........K...........",
        "......................",
        ".@........B...........", // Falling block above key
        "###.##############.###",
        "######################"
    ], "Is it worth it?"),

    parseLevel(14, "Look Both Ways", [
        "....................D.",
        "...................###",
        "....<...<...<.........",
        "......................",
        ".@...>...>...>.....###",
        "###................###",
        "######################"
    ], "Crossfire."),

    parseLevel(15, "Shattered", [
        "....................D.",
        "...................###",
        "....G...G...G.........", // Glass
        "....^...^...^.........",
        ".@....................",
        "###................###",
        "######################"
    ], "Don't jump too hard."),

    parseLevel(16, "Mirror Mirror", [
        "....................D.",
        "...................###",
        "....Z.......D.........", // Fake win running around
        "......................",
        ".@.......Z............",
        "###.##############.###",
        "######################"
    ], "Which one is real?"),

    parseLevel(17, "Ups and Downs", [
        "....................D.",
        "...................###",
        ".....=.......=........",
        ".......^...^..........",
        ".@....................",
        "###.##############.###",
        "######################"
    ], "Moving targets."),

    parseLevel(18, "Crush Depth", [
        "....................D.",
        "...................###",
        "....C...C...C...C.....",
        "......................",
        ".@....................",
        "###.##############.###",
        "######################"
    ], "Squish."),

    parseLevel(19, "Builder's Wall", [
        "....................D.",
        "...................###",
        "..........4...........", // Monster Builder
        "......................",
        ".@....................",
        "###.##############.###",
        "######################"
    ], "He's blocking you."),

    parseLevel(20, "Run!", [
        "W...................D.", // Doom Wall
        "W..................###",
        "W...T...T...T.........",
        ".@....................",
        "###................###",
        "######################"
    ], "Don't look back."),

    // --- PHASE 3: MECHANICS & PHYSICS (21-40) ---
    parseLevel(21, "Pinball", [
        "D.....................",
        "###...................",
        "......J...J...J.......",
        "......................",
        "..........^...........",
        ".@...J.........J......",
        "###................###",
        "######################"
    ], "Boing."),

    parseLevel(22, "Timing is Key", [
        "....................D.",
        "...................###",
        "....L...L...L.........", // Timed Doors
        "......................",
        ".@..b...b...b.........",
        "###................###",
        "######################"
    ], "Tick tock."),

    parseLevel(23, "Electric Boogaloo", [
        "....................D.",
        "...................###",
        "....E..._...E.........",
        "......................",
        ".@....................",
        "###.##############.###",
        "######################"
    ], "Zap."),

    parseLevel(24, "Swing Low", [
        "....................D.",
        "...................###",
        "....P...P...P.........", // Pendulums
        "......................",
        ".@....................",
        "###.##############.###",
        "######################"
    ], "Blade runner."),

    parseLevel(25, "Homing Instinct", [
        "....................D.",
        "...................###",
        ".........H............", // Homing Missile
        "......................",
        ".@...#...#...#........",
        "###.###.###.###....###",
        "######################"
    ], "It follows."),

    parseLevel(26, "Treadmill", [
        "....................D.",
        "...................###",
        "....<<<<<<<<<.........", // Shooters pushing back
        "......................",
        ".@....................",
        "###.##############.###",
        "######################"
    ], "Push through."),

    parseLevel(27, "Fragile Path", [
        "....................D.",
        "...................###",
        "....F...F...F...F.....",
        "......^...^...^.......",
        ".@....................",
        "###................###",
        "######################"
    ], "Don't stop."),

    parseLevel(28, "Saw Trap", [
        "....................D.",
        "...................###",
        "....R...R...R.........", // Rotating Saws
        "......................",
        ".@...J...J...J.....###",
        "###................###",
        "######################"
    ], "Jump carefully."),

    parseLevel(29, "Thief", [
        "....................D.",
        "...................###",
        "........3...K.........", // Collector
        "......................",
        ".@....................",
        "###.##############.###",
        "######################"
    ], "Get the key first."),

    parseLevel(30, "Platformer", [
        "....................D.",
        "...................###",
        ".....=...=...=........",
        "......................",
        ".@....................",
        "###................###",
        "######################"
    ], "Standard? No."),

    parseLevel(31, "Spike Ceiling", [
        "^^^^^^^^^^^^^^^^^^^^^^",
        "....................D.",
        "...................###",
        "....J...J...J.........",
        ".@....................",
        "###................###",
        "######################"
    ], "Don't jump too high."),

    parseLevel(32, "Guard Duty", [
        "....................D.",
        "...................###",
        ".....2...2...2........", // Guards
        "......................",
        ".@....................",
        "###.##############.###",
        "######################"
    ], "Sneak."),

    parseLevel(33, "Button Masher", [
        "....................D.",
        "...................###",
        "....O...O...O.........", // Toggle Walls
        "......................",
        ".@..b...b...b.........",
        "###................###",
        "######################"
    ], "Toggle it."),

    parseLevel(34, "Dark Room", [
        "....................D.",
        "...................###",
        ".........^............",
        ".........#............",
        ".@.......#............",
        "###.....###........###",
        "######################"
    ], "Lights out.", true),

    parseLevel(35, "Spinner", [
        "....................D.",
        "...................###",
        ".........*............", // Giant Spinner
        "......................",
        ".@....................",
        "###.##############.###",
        "######################"
    ], "Round and round."),

    parseLevel(36, "One Way", [
        "....................D.",
        "...................###",
        "....-.......-.........",
        "....-.......-.........",
        ".@..-.......-.........",
        "###................###",
        "######################"
    ], "Up and over."),

    parseLevel(37, "Heavy Metal", [
        "....................D.",
        "...................###",
        "....B...B...B.........", // Falling Blocks
        "......................",
        ".@....................",
        "###.##############.###",
        "######################"
    ], "Heads up."),

    parseLevel(38, "Laser Grid", [
        "....................D.",
        "...................###",
        "....|...|...|.........", // Rhythm Spikes
        "......................",
        ".@....................",
        "###.##############.###",
        "######################"
    ], "Timing."),

    parseLevel(39, "Fake Floors", [
        "....................D.",
        "...................###",
        "......................",
        "......................",
        ".@..T...T...T......###",
        "###................###",
        "######################"
    ], "Trust nothing."),

    parseLevel(40, "Boss Fight 1", [
        "....................D.",
        "...................###",
        ".1...2...3...4........", // All monsters
        "......................",
        ".@....................",
        "###.##############.###",
        "######################"
    ], "Monster Mash."),

    // --- PHASE 4: COMPLEX PUZZLES (41-60) ---
    parseLevel(41, "The Cage", [
        "#######.##############",
        "#.....#.#...........D.",
        "#.K...#.#..........###",
        "#.....#.#.............",
        ".@..b.#.#.............",
        "#######.##############",
        "######################"
    ], "Unlock me."),

    parseLevel(42, "Wind Tunnel", [
        "....................D.",
        "...................###",
        "....>...>...>...>.....",
        "....>...>...>...>.....",
        ".@....................",
        "###................###",
        "######################"
    ], "High velocity."),

    parseLevel(43, "Precision Jump", [
        "....................D.",
        "...................###",
        "......................",
        "......................",
        ".@..#...#...#......###", // Single block jumps
        "###................###",
        "######################"
    ], "Pixel perfect."),

    parseLevel(44, "Doppelganger", [
        "....................D.",
        "...................###",
        "....1...1...1.........",
        "......................",
        ".@....................",
        "###..I...I...I.....###",
        "######################"
    ], "Ghosts & Illusions."),

    parseLevel(45, "Battery Acid", [
        "....................D.",
        "...................###",
        "...._..._..._.........", // Charged floor
        "......E...E...........",
        ".@....................",
        "###.##############.###",
        "######################"
    ], "Electrified."),

    parseLevel(46, "Climb", [
        "####D#################",
        "####.#################",
        "####-#################",
        "####-.................",
        "####-.................",
        ".@..J.................",
        "######################",
        "######################"
    ], "Vertical."),

    parseLevel(47, "Squeeze", [
        "....................D.",
        "...................###",
        "....C...C...C.........",
        "....=...=...=.........",
        ".@....................",
        "###................###",
        "######################"
    ], "Between a rock."),

    parseLevel(48, "Sniper", [
        "....................D.",
        "...................###",
        ".........H............",
        "......................",
        ".@...G...G...G.....###",
        "###................###",
        "######################"
    ], "Break cover."),

    parseLevel(49, "Switcheroo", [
        "....................D.",
        "...................###",
        ".........O............",
        ".........#............",
        ".@...b...#...b........",
        "###.###..#..####...###",
        "######################"
    ], "Toggle puzzle."),

    parseLevel(50, "The Drop", [
        "......................",
        ".@....................",
        "###...................",
        "......................",
        "......................",
        ".........^............",
        "....................D.",
        "...................###",
        "######################"
    ], "Aim for the gap."),

    parseLevel(51, "Minefield", [
        "....................D.",
        "...................###",
        "....T...F...T...F.....",
        "......................",
        ".@....................",
        "###.##############.###",
        "######################"
    ], "Step carefully."),

    parseLevel(52, "Red Light", [
        "....................D.",
        "...................###",
        "....O...2...O...2.....",
        "......................",
        ".@....................",
        "###.##############.###",
        "######################"
    ], "Stop."),

    parseLevel(53, "Chaos", [
        "....................D.",
        "...................###",
        "....?.................", // Just messy
        "....T...F...I...G.....",
        ".@....................",
        "###.##############.###",
        "######################"
    ], "Entropy."),

    parseLevel(54, "Gauntlet", [
        "....................D.",
        "...................###",
        "....<...H...<...H.....",
        "......................",
        ".@...J...J...J.....###",
        "###................###",
        "######################"
    ], "Dodge."),

    parseLevel(55, "Wall Runner", [
        "######################",
        "###.................D.",
        "###.................##",
        "###.................##",
        "W...-...............##",
        ".@..-.................",
        "######################",
        "######################"
    ], "Climb fast."),

    parseLevel(56, "Key Chase", [
        "....................D.",
        "...................###",
        "........3...K.........",
        "......................",
        ".@....1...1...........",
        "###.##################",
        "######################"
    ], "Beat him to it."),

    parseLevel(57, "Invisible Doom", [
        "....................D.",
        "...................###",
        "W.....I.....I.........",
        ".@....................",
        "###..####..####....###",
        "######################"
    ], "Run blind."),

    parseLevel(58, "Grinder", [
        "....................D.",
        "...................###",
        "....*...R...*...R.....",
        "......................",
        ".@....................",
        "###.##############.###",
        "######################"
    ], "Tight squeeze."),

    parseLevel(59, "Leap of Faith 2", [
        "....................D.",
        "...................###",
        "......................",
        "......................",
        ".@.................III",
        "###...................",
        "######################"
    ], "Believe."),

    parseLevel(60, "Ascension", [
        ".......D..............",
        ".......#..............",
        ".......-..............",
        ".......-..............",
        ".......-.......1......",
        ".......-..............",
        ".@.....J..............",
        "######################"
    ], "Go up."),

    // --- PHASE 5: THE TROLL GAUNTLET (61-80) ---
    parseLevel(61, "Nice Level", [
        "......................",
        "....................D.",
        "...................###",
        "......................",
        "......................",
        ".@.................T..",
        "###.##################",
        "######################"
    ], "Too easy?"),

    parseLevel(62, "Panic Room", [
        "#########.############",
        "#.......#.#.........D.",
        "#...W...#.#........###",
        "#.......#.#...........",
        ".@......#.#...........",
        "#########.############",
        "######################"
    ], "No exit?"),

    parseLevel(63, "Surprise!", [
        "....................D.",
        "...................###",
        ".........B............",
        "......................",
        ".@....................",
        "###.#######T##########",
        "######################"
    ], "Block head."),

    parseLevel(64, "Ghost Wall", [
        "....................D.",
        "...................###",
        "....I...I...I...I.....",
        "....1...1...1...1.....",
        ".@....................",
        "###................###",
        "######################"
    ], "Phasing."),

    parseLevel(65, "Moving Target", [
        "......................",
        "..........D...........",
        "..........=...........",
        "......................",
        ".@....................",
        "###.##############.###",
        "######################"
    ], "Door moves."),

    parseLevel(66, "Key Fakeout", [
        "....................D.",
        "...................###",
        "........K.............",
        "......................",
        ".@..3.......3.........",
        "###.##################",
        "######################"
    ], "Grab it."),

    parseLevel(67, "Spike Rain", [
        "V...V...V...V...V...V.",
        "....................D.",
        "...................###",
        "......................",
        ".@....................",
        "###.##############.###",
        "######################"
    ], "Umbrella?"),

    parseLevel(68, "Laser Dance", [
        "....................D.",
        "...................###",
        "....E...|...E...|.....",
        "....|...E...|...E.....",
        ".@....................",
        "###.##############.###",
        "######################"
    ], "Rhythm."),

    parseLevel(69, "The Pit", [
        "......................",
        ".@..................D.",
        "###.................##",
        "......................",
        "......................",
        "......................",
        ".........^............",
        "......................",
        "......................",
        "...................###",
        "######################"
    ], "Deep down."),

    parseLevel(70, "Logic Gate", [
        "....................D.",
        "...................###",
        "....L...O...L...O.....",
        "......................",
        ".@..b.......b.........",
        "###.#########.####.###",
        "######################"
    ], "AND / OR."),

    parseLevel(71, "High Tension", [
        "....................D.",
        "...................###",
        "...._..._..._..._.....",
        "......E...E...E.......",
        ".@....................",
        "###................###",
        "######################"
    ], "Grounded."),

    parseLevel(72, "Fragile Power", [
        "....................D.",
        "...................###",
        "....F...F...F...F.....",
        "...._..._..._..._.....",
        ".@....................",
        "###................###",
        "######################"
    ], "Shocking."),

    parseLevel(73, "Spark Gap", [
        "....................D.",
        "...................###",
        "....|...E...|...E.....",
        "......................",
        ".@....................",
        "###.##############.###",
        "######################"
    ], "Mind the gap."),

    parseLevel(74, "Battery Pack", [
        "....................D.",
        "...................###",
        ".........L............",
        ".........#............",
        ".@...b...#...b........",
        "###.###._#.####....###",
        "######################"
    ], "Charge it."),

    parseLevel(75, "Thunderstruck", [
        "....................D.",
        "...................###",
        ".....H.....H.....H....",
        "....._....._....._....",
        ".@....................",
        "###.##############.###",
        "######################"
    ], "Incoming."),

    parseLevel(76, "Static", [
        "....................D.",
        "...................###",
        "....G...G...G...G.....",
        "...._..._..._..._.....",
        ".@....................",
        "###................###",
        "######################"
    ], "Clear."),

    parseLevel(77, "Jackpot", [
        "....................D.",
        "...................###",
        "....O...O...O...O.....",
        "......................",
        ".@...J...J...J.....###",
        "###................###",
        "######################"
    ], "Lucky 7."),

    parseLevel(78, "Short Circuit", [
        "....................D.",
        "...................###",
        ".........1............",
        "....E.........E.......",
        ".@.......b............",
        "###.##############.###",
        "######################"
    ], "Ghost in machine."),

    parseLevel(79, "Power Surge", [
        "W...................D.",
        "W..................###",
        "W..._..._..._..._.....",
        ".@....................",
        "###.##############.###",
        "######################"
    ], "Run fast."),

    parseLevel(80, "THE END", [
        "..........................................................................................D.",
        ".........................................................................................###",
        "W...1...2...3...4...|...E...O...L...K...J...=...C...^...V...H...Z...X...G...F...T...B...P...", // Every single mechanic
        ".@..........................................................................................",
        "###.#####################################################################################.###",
        "#############################################################################################"
    ], "Good luck."),
];